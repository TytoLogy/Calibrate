freq_list=[0
0.0512
0.06144
0.07168
0.08192
0.09216
0.1024
0.11264
0.12288
0.13312
0.14336
0.1536
0.16384
0.17408
0.18432
0.19456
0.2048
0.21504
0.22528
0.23552
0.24576
0.256
0.26624
0.27648
0.28672
0.29696
0.3072
0.31744
0.32768
0.33792
0.34816
0.3584
0.36864
0.37888
0.38912
0.39936
0.4096
0.41984
0.43008
0.44032
0.45056
0.4608
0.47104
0.48128
0.49152
0.50176
0.512
0.52224
0.53248
0.54272
0.55296
0.5632
0.57344
0.58368
0.59392
0.60416
0.6144
0.62464
0.63488
0.64512
0.65536
0.6656
0.67584
0.68608
0.69632
0.70656
0.7168
0.72704
0.73728
0.74752
0.75776
0.768
0.77824
0.78848
0.79872
0.80896
0.8192
0.82944
0.83968
0.84992
0.86016
0.8704
0.88064
0.89088
0.90112
0.91136
0.9216
0.93184
0.94208
0.95232
0.96256
0.9728
0.98304
0.99328
1
];

gain_list=[1.1617
1.1617
1.2958
1.228
1.6396
1.0328
0.75237
0.86536
0.82938
0.8766
1.1787
1.0722
0.9058
0.96948
0.82703
0.77392
1.1633
1.4971
1.5932
1.651
1.7429
1.3266
1.5867
1.3138
1.3014
1.4004
1.3358
1.6099
2.0782
2.0512
1.7994
1.514
1.6677
1.5925
1.8416
1.5667
1.6755
1.6209
1.6469
1.7463
2.0545
1.8954
2.3362
2.8598
2.3886
2.9097
2.7577
3.4956
4.163
4.1604
5.2878
6.8649
5.7546
4.9929
4.6636
4.6585
4.6704
4.677
3.6992
4.2848
4.107
3.6321
3.8883
4.6223
3.919
4.3043
3.3752
3.7477
4.0865
4.1418
4.8208
5.0146
5.0836
6.2562
7.5723
6.7504
6.7806
6.2889
7.3148
6.9393
7.7942
5.5636
7.1377
6.4571
6.9171
7.5311
6.8759
7.5855
8.2697
8.0503
9.4193
11.169
13.562
21.056
21.056
];


ntaps = 250;

nyquist = 97656.25;

filtcoefs = fir2(ntaps,freq_list,10.^(gain_list/20));

% plot data (added 16 Nov 2017, SJS)
figure(1)
plot(freq_list, gain_list)
plot(freq_list, gain_list, '.-')
grid
xlabel('Frequency (normalized)');
ylabel('Gain (dB)');
figure(2)
freqz(filtcoefs)

[outfile, outpath] = uiputfile('*.txt', ...
								'Select storage location for FIR', pwd);
if outfile == 0
	return
else
	fileid = fopen(fullfile(outpath, outfile),'wt');
	fprintf(fileid,'%6f\n',filtcoefs);
	fclose(fileid);
end